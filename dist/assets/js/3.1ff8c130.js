(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{53:function(s,t,a){"use strict";a.r(t);var r=a(0),n=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"iview-admin架构分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iview-admin架构分析","aria-hidden":"true"}},[s._v("#")]),s._v(" iview-admin架构分析")]),a("h3",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景","aria-hidden":"true"}},[s._v("#")]),s._v(" 背景")]),a("p",[s._v("随着业务发展，公司现有的某个项目（代号F）越来越庞大复杂，原有项目架构在易维护性，易扩展性上体现得越来越吃力，一直在考虑重构。前段时间机缘巧合看到TalkingData团队发布了一个后台管理系统集成解决方案"),a("a",{attrs:{href:"https://github.com/iview/iview-admin",target:"_blank",rel:"noopener noreferrer"}},[s._v("iview-admin")]),s._v("，clone下来后发现整个项目架构异常清奇，值得学习一波")]),a("p",[s._v("个人认为，可从组件化、模块化、规范化、自动化四个方面来思考如何实现一个好的项目架构，达到易维护、易扩展、模块和模块间的低耦合性，使用一些工具解决一些通用型问题等目的, 下面从以上几个方面来分析iview-admin的架构")]),a("h3",{attrs:{id:"模块化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块化","aria-hidden":"true"}},[s._v("#")]),s._v(" 模块化")]),a("p",[s._v("简单来说，模块化就是将一个大文件拆分成相互依赖的小文件，再进行统一的拼装和加载，是在文件层面上对代码和资源进行拆分。")]),a("p",[s._v("下面将项目F和iview-admin进行对比:")]),a("p",[s._v("项目F所有的路由页面都放在components文件夹中，这个文件夹中还有一些适用于整个项目的common组件和mixins。")]),a("p",[s._v("其中每个路由页面是一个单独.vue文件，这些.vue文件中包含了html，js和scss，稍微大点的页面已经可怕到有上千行代码了：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("├─components\n│  ├─common\n│  ├─ 一个长达千行的xxx.vue\n│  ├─ 另一个长达千行的xxx.vue\n│  └─ ...\n")])]),a("p",[s._v("而来看一下iview-admin的文件结构：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("├─views\n│  ├─common-components\n│  ├─error-pages\n│  │   ├─error-page.vue\n│  │   ├─error-page.less\n│  │   ├─404.vue\n│  │   ├─404.less\n│  │   ├─500.vue\n│  │   ├─500.less\n│  │   ├─403.vue\n│  │   └─403.less\n│  └─tables\n│      ├─components\n│      ├─data\n│      ├─xxx.vue\n│      └─xxx.less\n")])]),a("p",[s._v("首先明显可以看到一点，iview-admin将less文件单独拆分开来了，这样一来.vue文件明显可以小很多")]),a("p",[s._v("接下来来看一下error-pages文件夹下的error-page.vue文件：")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token operator"}},[s._v("...")]),s._v("\n\n"),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("Row"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("div "),a("span",{attrs:{class:"token keyword"}},[s._v("class")]),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v('"error-page-show"')]),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("error404"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("error404"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("div "),a("span",{attrs:{class:"token keyword"}},[s._v("class")]),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v('"error-page-cover"')]),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("Row"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{attrs:{class:"token operator"}},[s._v("...")]),s._v("\n\n"),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("Row"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("div "),a("span",{attrs:{class:"token keyword"}},[s._v("class")]),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v('"error-page-show"')]),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("error403"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("error403"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("div "),a("span",{attrs:{class:"token keyword"}},[s._v("class")]),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v('"error-page-cover"')]),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("Row"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{attrs:{class:"token operator"}},[s._v("...")]),s._v("\n\n\n"),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("Row"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("div "),a("span",{attrs:{class:"token keyword"}},[s._v("class")]),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v('"error-page-show"')]),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("error500"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("error500"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("div "),a("span",{attrs:{class:"token keyword"}},[s._v("class")]),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v('"error-page-cover"')]),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("Row"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{attrs:{class:"token operator"}},[s._v("...")]),s._v("\n\n"),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("script"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Error404 "),a("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'./404.vue'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Error500 "),a("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'./500.vue'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Error403 "),a("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'./403.vue'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    components"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        Error404"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        Error500"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        Error403\n    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("<")]),a("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("script"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),a("p",[s._v("可以发现，")]),a("h3",{attrs:{id:"utils"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utils","aria-hidden":"true"}},[s._v("#")]),s._v(" utils")]),a("p",[s._v("将项目中所有共用的方法封装到utils对象中，包括ajax请求")])])}],!1,null,null,null);t.default=n.exports}}]);